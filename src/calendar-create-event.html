<!DOCTYPE html>
<html lang="ru" class="page">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="theme-color" content="#111111">
    <title>Календарь запланированных просмотров</title>
    <link rel="preload" href="fonts/CoFoSans-Regular.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="fonts/CoFoSans-Medium.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="stylesheet" href="css/vendor.css">
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/calendar-page.css">
    <script id="ymaps-id"></script>
    <script defer src="js/calendar-page.js"></script>
</head>

<body class="page__body">
    <div class="site-container site-container--calendar-page">
        @include('partials/header.html')
        <main class="main main-page-gap calendar-create-event">
            <input type="text" name="Имя" class="input-reset" date-current hidden placeholder="Имя">
            <div class="calendar-create-event__container">
                <div class="top-page-inner-title__container container">
                    <a href="#" class="submit-app__back top-page-inner-title__back back-link">
                        <svg>
                            <use xlink:href="./img/sprite.svg#arrow-left"></use>
                        </svg>
                        <span>Назад</span>
                    </a>
                    <h1 class="calendar-create-event__title top-page-inner-title__title title-2">
                        Новое событие
                    </h1>
                </div>
                <div class="calendar-create-event__body">
                    <div class="container">
                        <form action="#" id="calendar-create-event-form" class="calendar-create-event__form">
                            <div class="calendar-create-event__row">
                                <div class="calendar-create-event__item field-dropdown field-dropdown--col _container" data-field-dropdown-name="developer">
                                    <div class="field-dropdown__name">
                                        Действие
                                    </div>
                                    <div class="select-secondary field-dropdown__wrapper" data-video-meeting-target>
                                        <div class="select-secondary__wrapper">
                                            <select class="select-secondary__body" hidden name="complex">
                                                <option value="none" placeholder>Не выбрано</option>
                                                <option value="Просмотр объекта">Просмотр объекта</option>
                                                <option value="video-meeting">Видеовстреча</option>
                                                <option value="Показ объекта">Показ объекта</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="calendar-create-event__item field-input field-input--col _container" data-video-meeting-block>
                                    <div class="field-input__name">
                                        Видеовстреча
                                    </div>
                                    <div class="field-input__wrapper _not-wrap">
                                        <div class="input-text input-text--no-exp _width-100-prc">
                                            <label class="input-text__label">
                                                <input type="text" class="input-reset input-text__input" placeholder="">
                                            </label>
                                        </div>
                                        <button type="button" class="btn btn-reset calendar-create-event__create-link">Создать</button>
                                        <div class="secondary-tooltip secondary-tooltip--click secondary-tooltip--bottom-center calendar-create-event__create-link-tooltip">
                                            <button type="button" class="btn btn-reset secondary-tooltip__btn">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 16 16">
                                                    <path fill="currentColor"
                                                        d="M6.5 3a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0zm0 5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0zm0 5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0z">
                                                    </path>
                                                </svg>
                                            </button>
                                            <div class="secondary-tooltip__content" data-tooltip-selects>
                                                <button type="button" class="btn btn-reset secondary-tooltip__close">
                                                    <svg>
                                                        <use xlink:href="./img/sprite.svg#x"></use>
                                                    </svg>
                                                </button>
                                                <button type="button" class="btn btn-reset calendar-create-event__create-link-select _active" data-tooltip-select>
                                                    VK звонки
                                                </button>
                                                <button type="button" class="btn btn-reset calendar-create-event__create-link-select" data-tooltip-select>
                                                    Видеозвонки Mail.ru
                                                </button>
                                                <input type="text" name="Имя" class="input-reset" data-tooltip-input hidden placeholder="Имя">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="calendar-create-event__item field-input field-input--col _container" data-video-meeting-block>
                                    <div class="field-input__name">
                                        Видеовстреча
                                    </div>
                                    <div class="field-input__wrapper _not-wrap">
                                        <button type="button" class="btn btn-reset btn btn-secondary btn-secondary--small calendar-create-event__add-link">
                                            <svg>
                                                <use xlink:href="./img/sprite.svg#telemost"></use>
                                            </svg>
                                            <span>Добавить видеовстречу</span>
                                        </button>
                                    </div>
                                </div>
                                <div class="calendar-create-event__item field-date field-date--col _container">
                                    <div class="field-date__name">
                                        Время и дата
                                    </div>
                                    <div class="field-date__wrapper">
                                        <div class="field-date__col">
                                            <div class="input-text input-text--no-exp date-picker">
                                                <label class="input-text__label">
                                                    <input type="text" name="Дата" class="input-reset input-text__input date-picker__input calendar-create-event__date" value=""
                                                        placeholder="">
                                                </label>
                                            </div>
                                            <div class="input-text input-text--no-exp">
                                                <label class="input-text__label">
                                                    <input type="text" name="Время" class="input-reset input-text__input input-time" value="" placeholder="">
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="calendar-create-event__item field-dropdown field-dropdown--col _container" data-field-dropdown-name="developer">
                                    <div class="field-dropdown__name">
                                        Встреча на объекте
                                    </div>
                                    <div class="search-select-one search-select-one--img-left search-select-one--no-search search-select-one--img-left--no-circle field-dropdown__wrapper"
                                        data-create-event-object>
                                        <button type="button" class="btn btn-reset search-select-one__button">
                                            <div class="search-select-one__button-wrapper">
                                                <div></div>
                                                <div>Не выбрано</div>
                                            </div>
                                            <svg>
                                                <use xlink:href="./img/sprite.svg#check"></use>
                                            </svg>
                                        </button>
                                        <div class="search-select-one__dropdown search-select-one__dropdown--left">
                                            <button type="button" class="btn btn-reset search-select-one__close">
                                                <svg>
                                                    <use xlink:href="./img/sprite.svg#x"></use>
                                                </svg>
                                            </button>
                                            <div class="search-select-one__wrapper simplebar-third">
                                                <div class="search-select-one__item search-select-one__placeholder" data-value="none">
                                                    Не выбрано
                                                </div>
                                                <div class="search-select-one__item" data-value="object-1">
                                                    <img loading="lazy" src="./img/card-1.jpg" alt="ПИК">
                                                    <span>1-комн. квартира,54 м², 12/12 эт.</span>
                                                </div>
                                                <div class="search-select-one__item" data-value="object-2">
                                                    <img loading="lazy" src="./img/card-2.jpg" alt="ПИК">
                                                    <span>2-комн. квартира,54 м², 12/12 эт.</span>
                                                </div>
                                                <div class="search-select-one__item" data-value="object-3">
                                                    <img loading="lazy" src="./img/card-5.jpg" alt="ПИК">
                                                    <span>3-комн. квартира,54 м², 12/12 эт.</span>
                                                </div>
                                                <div class="search-select-one__item" data-value="object-4">
                                                    <img loading="lazy" src="./img/card-6.jpg" alt="ПИК">
                                                    <span>4-комн. квартира,54 м², 12/12 эт.</span>
                                                </div>
                                            </div>
                                        </div>
                                        <input type="text" name="object" value="Волгоград" class="search-select-one__input-hidden" hidden>
                                    </div>
                                </div>
                                <div class="calendar-create-event__item field-input field-input--col _container" data-create-event-object-address hidden>
                                    <div class="field-input__name">
                                        Адрес
                                    </div>
                                    <div class="field-input__wrapper _disabled-opacity">
                                        <div class="input-text input-text--no-exp _width-100-prc">
                                            <label class="input-text__label">
                                                <input type="text" class="input-reset input-text__input" value="Краснодар, ул.Академика Королева, 8/1, к. 1" placeholder="">
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="calendar-create-event__item _container" data-address-btn>
                                    <button type="button" class="btn btn-reset calendar-create-event__add">
                                        <svg>
                                            <use xlink:href="./img/sprite.svg#plus"></use>
                                        </svg>
                                        <span>Или укажите адрес/место</span>
                                    </button>
                                </div>
                                <div class="calendar-create-event__item field-input field-input--col _container" data-address-section hidden>
                                    <div class="field-input__name">
                                        Или укажите адрес/место
                                    </div>
                                    <div class="field-input__wrapper" data-create-event-address>
                                        <div class="input-text input-text--no-exp _width-100-prc">
                                            <label class="input-text__label">
                                                <input type="text" class="input-reset input-text__input" placeholder="">
                                            </label>
                                        </div>
                                        <button type="button" class="btn btn-reset field-input__remove">
                                            <svg>
                                                <use xlink:href="./img/sprite.svg#trash"></use>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <div class="calendar-create-event__item field-dropdown field-dropdown--col _container" data-field-dropdown-name="developer" data-participant-section
                                    hidden>
                                    <div class="field-dropdown__name">
                                        Участники
                                    </div>
                                    <div class="search-select search-select--img-left field-dropdown__wrapper" data-search-select-subtitle="Не выбрано"
                                        data-create-event-participant>
                                        <button type="button" class="btn btn-reset search-select__button">
                                            <div class="search-select__button-wrapper">
                                                <div></div>
                                                <div></div>
                                            </div>
                                            <svg>
                                                <use xlink:href="./img/sprite.svg#check"></use>
                                            </svg>
                                        </button>
                                        <div class="search-select__dropdown">
                                            <button type="button" class="btn btn-reset search-select__close">
                                                <svg>
                                                    <use xlink:href="./img/sprite.svg#x"></use>
                                                </svg>
                                            </button>
                                            <label class="input-primary search-select__input">
                                                <input type="text" name="Имя" class="input-reset input-primary__input" placeholder="Поиск по названию">
                                            </label>
                                            <div class="search-select__wrapper simplebar-third">
                                                <div class="search-select__item checkbox-secondary">
                                                    <input id="people-you" name="developer-name_1" class="checkbox-secondary__input" disabled checked type="checkbox" value="true">
                                                    <label for="people-you" class="checkbox-secondary__label">
                                                        <span class="checkbox-secondary__text">
                                                            <span>
                                                                <img loading="lazy" src="./img/avatar-1.jpg" alt="ПИК">
                                                                <span>Вы</span>
                                                            </span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="calendar-create-event__item field-notif field-notif--col _container">
                                    <div class="field-notif__name">
                                        Уведомления
                                    </div>
                                    <div class="field-notif__wrapper">
                                        <div class="field-notif__item">
                                            <div class="field-notif__select search-select-one search-select-one--left search-select-one--no-search">
                                                <button type="button" class="btn btn-reset search-select-one__button">
                                                    <div class="search-select-one__button-wrapper">
                                                        <div>Время</div>
                                                        <div>Не выбрано</div>
                                                    </div>
                                                    <svg>
                                                        <use xlink:href="./img/sprite.svg#check"></use>
                                                    </svg>
                                                </button>
                                                <div class="search-select-one__dropdown">
                                                    <button type="button" class="btn btn-reset search-select-one__close">
                                                        <svg>
                                                            <use xlink:href="./img/sprite.svg#x"></use>
                                                        </svg>
                                                    </button>
                                                    <div class="search-select-one__wrapper simplebar-third">
                                                        <div class="search-select-one__item _active" data-value="now">
                                                            в момент события
                                                        </div>
                                                        <div class="search-select-one__item" data-value="5-min">
                                                            за 5 мин
                                                        </div>
                                                        <div class="search-select-one__item" data-value="15-min">
                                                            за 15 мин
                                                        </div>
                                                        <div class="search-select-one__item" data-value="30-min">
                                                            за 30 мин
                                                        </div>
                                                        <div class="search-select-one__item" data-value="1-hour">
                                                            за 1 час
                                                        </div>
                                                        <div class="search-select-one__item" data-value="2-hour">
                                                            за 2 часа
                                                        </div>
                                                        <div class="search-select-one__item" data-value="1-day">
                                                            за 1 день
                                                        </div>
                                                        <div class="search-select-one__item" data-value="2-day">
                                                            за 2 дня
                                                        </div>
                                                        <div class="search-select-one__item" data-value="1-week">
                                                            за 1 неделю
                                                        </div>
                                                    </div>
                                                </div>
                                                <input type="text" name="object" value="email" class="search-select-one__input-hidden" hidden>
                                            </div>
                                            <div class="field-notif__select search-select-one search-select-one--left search-select-one--no-search">
                                                <button type="button" class="btn btn-reset search-select-one__button">
                                                    <div class="search-select-one__button-wrapper">
                                                        <div>Способ</div>
                                                        <div>Не выбрано</div>
                                                    </div>
                                                    <svg>
                                                        <use xlink:href="./img/sprite.svg#check"></use>
                                                    </svg>
                                                </button>
                                                <div class="search-select-one__dropdown">
                                                    <button type="button" class="btn btn-reset search-select-one__close">
                                                        <svg>
                                                            <use xlink:href="./img/sprite.svg#x"></use>
                                                        </svg>
                                                    </button>
                                                    <div class="search-select-one__wrapper simplebar-third">
                                                        <div class="search-select-one__item _active" data-value="email">
                                                            по e-mail
                                                        </div>
                                                        <div class="search-select-one__item" data-value="sms">
                                                            в смс
                                                        </div>
                                                        <div class="search-select-one__item" data-value="CalDAV">
                                                            через CalDAV
                                                        </div>
                                                    </div>
                                                </div>
                                                <input type="text" name="object" value="email" class="search-select-one__input-hidden" hidden>
                                            </div>
                                        </div>
                                        <button type="button" class="btn btn-reset field-notif__add">
                                            <svg>
                                                <use xlink:href="./img/sprite.svg#plus"></use>
                                            </svg>
                                            <span>Добавить ещё уведомление</span>
                                        </button>
                                    </div>
                                </div>
                                <div class="calendar-create-event__item _container" data-add-descr-btn>
                                    <button type="button" class="btn btn-reset btn-secondary btn-secondary--small calendar-create-event__add">
                                        <svg>
                                            <use xlink:href="./img/sprite.svg#plus"></use>
                                        </svg>
                                        <span>Добавить комментарий</span>
                                    </button>
                                </div>
                                <div class="calendar-create-event__item field-input field-input--col _container" hidden data-add-descr-section>
                                    <div class="field-input__name">
                                        Комментарий
                                    </div>
                                    <div class="field-input__wrapper">
                                        <div class="textarea-secondary textarea-secondary--default" data-textarea-secondary-min-height="96">
                                            <textarea name="type-value" class="input-reset textarea-secondary__input" maxlength="2000" placeholder=""></textarea>
                                        </div>
                                        <button type="button" class="btn btn-reset field-input__remove">
                                            <svg>
                                                <use xlink:href="./img/sprite.svg#trash"></use>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <div class="calendar-create-event__item field-file field-file--col">
                                    <div class="field-file__wrapper">
                                        <div class="photo-load photo-load--not-decor place-sale-photo">
                                            <div class="place-sale-photo__images photo-load__images">
                                            </div>
                                            <div class="place-sale-photo__wrapper photo-load__wrapper _container">
                                                <button type="button" class="btn btn-reset">
                                                    <p>
                                                        <span class="btn btn-reset btn-primary btn-secondary btn-secondary--small" style="min-width: 215px;">
                                                            Прикрепите файлы
                                                        </span>
                                                    </p>
                                                </button>
                                                <input type="file" data-upload-drop data-upload-drop-default data-upload-max-length="10" name="upload" multiple class="input-reset">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="calendar-create-event__item field-checkbox field-checkbox--col _container">
                                    <div class="field-checkbox__name">
                                        Доступ
                                    </div>
                                    <div class="field-checkbox__wrapper">
                                        <div class="checkbox-secondary">
                                            <input id="calendar-create-event-checkbox-1" name="personal-info" class="checkbox-secondary__input" type="checkbox" value="true">
                                            <label for="calendar-create-event-checkbox-1" class="checkbox-secondary__label">
                                                <span class="checkbox-secondary__text">
                                                    Участники могут редактировать событие
                                                </span>
                                            </label>
                                        </div>
                                        <div class="checkbox-secondary">
                                            <input id="calendar-create-event-checkbox-2" name="personal-info" class="checkbox-secondary__input" type="checkbox" value="true">
                                            <label for="calendar-create-event-checkbox-2" class="checkbox-secondary__label">
                                                <span class="checkbox-secondary__text">
                                                    Участники могут приглашать других
                                                </span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-reset btn-primary calendar-create-event__btn">Создать</button>
                        </form>
                    </div>
                </div>
            </div>
        </main>
        <div class="footer-fixed calendar-create-event-fixed fix-block">
            <div class="footer-fixed__container">
                <button type="submit" class="btn btn-reset btn-primary" form="calendar-create-event-form" style="width: 100%;">
                    Создать
                </button>
            </div>
        </div>
        @include('partials/footer.html')
    </div>
    <script>
        const split = window.location.href.split('?')[1];
        const input = document.querySelector('[date-current]');
        if (split && input) {
            const date = split.split("=")[1];
            input.setAttribute('value', date);
        }

        const objectField = document.querySelector('[data-create-event-object]');
        const participantField = document.querySelector('[data-create-event-participant]');
        objectField.addEventListener('change', () => {
            const participantFieldInner = participantField.querySelector('.simplebar-content');
            participantFieldInner.innerHTML = '';
            const participantsHTML = `
                <div class="search-select__item checkbox-secondary">
                    <input id="people-you" name="developer-name_1" class="checkbox-secondary__input" disabled checked type="checkbox" value="true">
                    <label for="people-you" class="checkbox-secondary__label">
                        <span class="checkbox-secondary__text">
                            <span>
                                <img loading="lazy" src="./img/avatar-1.jpg" alt="ПИК">
                                <span>Вы</span>
                            </span>
                        </span>
                    </label>
                </div>
                <div class="search-select__item checkbox-secondary">
                    <input id="people-1" name="developer-name_1" class="checkbox-secondary__input" checked type="checkbox" value="true">
                    <label for="people-1" class="checkbox-secondary__label">
                        <span class="checkbox-secondary__text">
                            <span>
                                <img loading="lazy" src="./img/avatar-1.jpg" alt="ПИК">
                                <span>Владимир А.</span>
                            </span>
                        </span>
                    </label>
                </div>
                <div class="search-select__item checkbox-secondary">
                    <input id="people-2" name="developer-name_1" class="checkbox-secondary__input" type="checkbox" value="true">
                    <label for="people-2" class="checkbox-secondary__label">
                        <span class="checkbox-secondary__text">
                            <span>
                                <img loading="lazy" src="./img/avatar-1.jpg" alt="ПИК">
                                <span>Владимир А.</span>
                            </span>
                        </span>
                    </label>
                </div>
                <div class="search-select__item checkbox-secondary">
                    <input id="people-3" name="developer-name_1" class="checkbox-secondary__input" type="checkbox" value="true">
                    <label for="people-3" class="checkbox-secondary__label">
                        <span class="checkbox-secondary__text">
                            <span>
                                <img loading="lazy" src="./img/avatar-1.jpg" alt="ПИК">
                                <span>Владимир А.</span>
                            </span>
                        </span>
                    </label>
                </div>
                <div class="search-select__item checkbox-secondary">
                    <input id="people-4" name="developer-name_1" class="checkbox-secondary__input" type="checkbox" value="true">
                    <label for="people-4" class="checkbox-secondary__label">
                        <span class="checkbox-secondary__text">
                            <span>
                                <img loading="lazy" src="./img/avatar-1.jpg" alt="ПИК">
                                <span>Владимир А.</span>
                            </span>
                        </span>
                    </label>
                </div>
            `;
            participantFieldInner.insertAdjacentHTML('beforeend', participantsHTML);
        })

        const addVideoMeetingBtn = document.querySelector('.calendar-create-event__add-link');
        const videoMeetingClose = document.querySelector('.calendar-create-event__video-meeting-close');

        if (addVideoMeetingBtn) {
            addVideoMeetingBtn.addEventListener('click', function () {
                this.setAttribute('hidden', '');
                const resultHTML = `
                <div class="calendar-create-event__video-meeting-result">
                    <span>Ссылка на встречу будет в описании.</span>
                    <button type="button" class="btn btn-reset calendar-create-event__video-meeting-close" title="Закрыть">
                        <svg>
                          <use xlink:href="./img/sprite.svg#x"></use>
                        </svg>
                    </button>
                </div>
            `;
                this.insertAdjacentHTML('beforebegin', resultHTML);
            })
        }
        document.addEventListener('click', (e) => {
            const target = e.target;
            const videoMeetingClose = target.closest('.calendar-create-event__video-meeting-close');
            if (!videoMeetingClose) return;
            addVideoMeetingBtn.removeAttribute('hidden');
            const result = document.querySelector('.calendar-create-event__video-meeting-result');
            if (result) result.remove();
        })

    </script>
    <!-- popups -->
    @include('popups/city.html')
    @include('popups/add.html')
    @include('popups/personal-area2.html')
    @include('popups/edit-profile.html')
    @include('popups/sber-tied.html')
    <!-- ==== -->
    <!-- popups -->
</body>


</html>
